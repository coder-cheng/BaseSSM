<div class="outlet" id="change-mess1">
    <!-- Start .outlet -->
    <!-- Page start here ( usual with .row ) -->
    <div class="row" style="margin: 0% 3%;">
        <div class="panel panel-default plain">
            <!-- Start .panel -->
            <div class="panel-heading white-bg">
                <h4 class="panel-title"><i class="st-file"></i> 更新信息 </h4>
            </div>
            <div class="panel-body">
                <form class="form-vertical hover-stripped" role="form">
                    <div class="form-group">
                        <label class="control-label">区域编号</label>
                        <input id="localId" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="control-label">区域名称</label>
                        <input id="localName" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="control-label">区域级别</label>
                        <input id="localLevel" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="control-label">区域所属</label>
                        <input id="localBelong" type="text" class="form-control">
                    </div>
                    <!-- End .form-group  -->
                    <div class="form-group mb15" id="footer-button">
                        <button class="btn btn-primary">确认</button>
                        <button class="btn btn-warning">取消</button>
                    </div>
                    <!-- End .form-group  -->
                </form>
            </div>
        </div>
    </div>
    <!-- Page End here -->
</div>
<script src="/assets/js/jquery-1.11.3.js"></script>
<script>
    /*注册方法和事件*/
    $(function () {
        /*加载数据的方法*/
        doLoadData();
        /*取消和确定按钮的点击事件*/
        $("#footer-button")
            .on("click", ".btn-warning", doCancel)
            .on("click", ".btn-primary", doSave)
    })

    /*加载数据的方法*/
    function doLoadData() {
        //从数据储存模块中获取存入data数据
        var data = $("#load-windows").data("data");
        //如果有数据，执行初始化表单方法
        if (data) {
            doInitForm(data);
        }
    }

    /*初始化表单的方法*/
    function doInitForm(data) {
        $("#localId").val(data.localid);
        $("#localId").attr("disabled","true");
        $("#localName").val(data.localname);
        $("#localLevel").val(data.locallevel);
        $("#localBelong").val(data.localbelong);
    }

    /*确认按钮的执行方法*/
    function doSave() {
        var params = getFormData();
        var data = $("#load-windows").data("data");
        var changeUrl = "sys/updateLocal.do";
        var insertUrl = "sys/insertLocal.do";
        var url;
        if (data) {
            url = changeUrl
        } else {
            url = insertUrl
        }
        $.ajax({
            type: "post",
            url: url,
            data: params,
            dataType: "json",
            success: function (result) {
                alert("没进来？");
                if (result.state == 1) {
                    alert(result.message);
                    doCancel();
                } else {
                    alert(result.message);
                }
            }
        })
    }

    /*取消按钮的执行方法*/
    function doCancel() {
        $("#load-windows").load("sys/localMess.do");
        alert("reback mess");
    }

    /*初始化表单的方法*/
    function getFormData() {
        var params = {
            localid: $("#localId").val(),
            localname: $("#localName").val(),
            locallevel: $("#localLevel").val(),
            localbelong: $("#localBelong").val()
        };
        return params;
    }
</script>
