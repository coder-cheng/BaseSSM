<div class="outlet" id="change-mess1">
    <!-- Start .outlet -->
    <!-- Page start here ( usual with .row ) -->
    <div class="row" style="margin: 0% 3%;">
        <div class="panel panel-default plain">
            <!-- Start .panel -->
            <div class="panel-heading white-bg">
                <h4 class="panel-title"><i class="st-file"></i> 更新信息 </h4>
            </div>
            <div class="panel-body">
                <form class="form-vertical hover-stripped" role="form">
                    <div class="form-group">
                        <label class="control-label">学校编号</label>
                        <input id="schoolId" type="text" class="form-control" value="这是学校的编号">
                    </div>
                    <div class="form-group">
                        <label class="control-label">学校名称</label>
                        <input id="schoolName" type="text" class="form-control" value="这是学校的名称">
                    </div>
                    <div class="form-group">
                        <label class="control-label">学校级别</label>
                        <input id="schoolLevel" type="text" class="form-control" value="这是学校的等级">
                    </div>
                    <div class="form-group">
                        <label class="control-label">学校所属</label>
                        <input id="schoolBelong" type="text" class="form-control" value="这是学校所在地">
                    </div>
                    <div id="footer-button" class="form-group mb15">
                        <button class="btn btn-primary">确认</button>
                        <button class="btn btn-warning">取消</button>
                    </div>
                    <!-- End .form-group  -->
                </form>
            </div>
        </div>
    </div>
    <!-- Page End here -->
</div>
<!-- End .outlet -->
<script src="/assets/js/jquery-1.11.3.js"></script>
<script>
    /*注册方法和事件*/
    $(function () {
        /*加载数据的方法*/
        doLoadData();
        /*取消和确定按钮的点击事件*/
        $("#footer-button")
            .on("click", ".btn-warning", doCancel)
            .on("click", ".btn-primary", doSave)
    })
    /*加载数据的方法*/
    function doLoadData() {
        //从数据储存模块中获取存入data数据
        var data = $("#load-windows").data("data");
        //如果有数据，执行初始化表单方法
        if (data) {
            doInitForm(data);
        }
    }
    /*初始化表单的方法*/
    function doInitForm(data) {
        $("#schoolId").val(data.schoolid);
        $("#schoolId").attr("disabled","true");
        $("#schoolName").val(data.schoolname);
        $("#schoolLevel").val(data.schoollevel);
        $("#schoolBelong").val(data.schoolbelong);
    }
    /*确认按钮的执行方法*/
    function doSave() {
        var params = getFormData();
        var data = $("#load-windows").data("data");
        var changeUrl = "sys/updateSchool.do";
        var insertUrl = "sys/insertSchool.do";
        var url;
        if (data) {
            url = changeUrl
        } else {
            url = insertUrl
        }
        $.ajax({
            type: "post",
            url: url,
            data: params,
            dataType: "json",
            success: function (result) {
                alert("没进来？");
                if (result.state == 1) {
                    alert(result.message);
                    doCancel();
                } else {
                    alert(result.message);
                }
            }
        })
    }
    /*取消按钮的执行方法*/
    function doCancel() {
        $("#load-windows").load("sys/SchoolMess.do");
        alert("取消");
    }
    /*初始化表单的方法*/
    function getFormData() {
        var params = {
            schoolid: $("#schoolId").val(),
            schoolname: $("#schoolName").val(),
            schoollevel: $("#schoolLevel").val(),
            schoolbelong: $("#schoolBelong").val()
        };
        return params;
    }
</script>